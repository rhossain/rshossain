"use strict";(self.webpackChunkrshossain=self.webpackChunkrshossain||[]).push([[934],{934:(nt,P,E)=>{E.r(P),E.d(P,{encodeIntoResult:()=>U,stegaEncodeSourceMap:()=>D,stegaEncodeSourceMap$1:()=>tt});var M=E(64);const S=/_key\s*==\s*['"](.*)['"]/;function m(t){if(!Array.isArray(t))throw new Error("Path is not an array");return t.reduce((e,r,n)=>{const i=typeof r;if("number"===i)return`${e}[${r}]`;if("string"===i)return`${e}${0===n?"":"."}${r}`;if(function W(t){return"string"==typeof t?S.test(t.trim()):"object"==typeof t&&"_key"in t}(r)&&r._key)return`${e}[_key=="${r._key}"]`;if(Array.isArray(r)){const[c,o]=r;return`${e}[${c}:${o}]`}throw new Error(`Unsupported path segment \`${JSON.stringify(r)}\``)},"")}const R={"\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","'":"\\'","\\":"\\\\"},I={"\\f":"\f","\\n":"\n","\\r":"\r","\\t":"\t","\\'":"'","\\\\":"\\"};function A(t){const e=[],r=/\['(.*?)'\]|\[(\d+)\]|\[\?\(@\._key=='(.*?)'\)\]/g;let n;for(;null!==(n=r.exec(t));)if(void 0===n[1])if(void 0===n[2])if(void 0===n[3]);else{const i=n[3].replace(/\\(\\')/g,c=>I[c]);e.push({_key:i,_index:-1})}else e.push(parseInt(n[2],10));else{const i=n[1].replace(/\\(\\|f|n|r|t|')/g,c=>I[c]);e.push(i)}return e}function j(t){return t.map(e=>{if("string"==typeof e||"number"==typeof e)return e;if(""!==e._key)return{_key:e._key};if(-1!==e._index)return e._index;throw new Error(`invalid segment:${JSON.stringify(e)}`)})}function T(t){return"object"==typeof t&&null!==t}function l(t,e,r=[]){if(function F(t){return null!==t&&Array.isArray(t)}(t))return t.map((n,i)=>{if(T(n)){const c=n._key;if("string"==typeof c)return l(n,e,r.concat({_key:c,_index:i}))}return l(n,e,r.concat(i))});if(T(t)){if("block"===t._type||"span"===t._type){const n={...t};return"block"===t._type?n.children=l(t.children,e,r.concat("children")):"span"===t._type&&(n.text=l(t.text,e,r.concat("text"))),n}return Object.fromEntries(Object.entries(t).map(([n,i])=>[n,l(i,e,r.concat(n))]))}return e(t,r)}function U(t,e,r){return l(t,(n,i)=>{if("string"!=typeof n)return n;const c=function J(t,e){if(!e?.mappings)return;const r=function N(t){return`$${t.map(e=>"string"==typeof e?`['${e.replace(/[\f\n\r\t'\\]/g,r=>R[r])}']`:"number"==typeof e?`[${e}]`:""!==e._key?`[?(@._key=='${e._key.replace(/['\\]/g,r=>R[r])}')]`:`[${e._index}]`).join("")}`}(function V(t){return t.map(e=>{if("string"==typeof e||"number"==typeof e)return e;if(-1!==e._index)return e._index;throw new Error(`invalid segment:${JSON.stringify(e)}`)})}(t));if(void 0!==e.mappings[r])return{mapping:e.mappings[r],matchedPath:r,pathSuffix:""};const n=Object.entries(e.mappings).filter(([f])=>r.startsWith(f)).sort(([f],[s])=>s.length-f.length);if(0==n.length)return;const[i,c]=n[0];return{mapping:c,matchedPath:i,pathSuffix:r.substring(i.length)}}(i,e);if(!c)return n;const{mapping:o,matchedPath:f}=c;if("value"!==o.type||"documentValue"!==o.source.type)return n;const s=e.documents[o.source.document],p=e.paths[o.source.path],d=A(f),a=A(p).concat(i.slice(d.length));return r({sourcePath:a,sourceDocument:s,resultPath:i,value:n})})}const h=".",x=`drafts${h}`,B=`versions${h}`;function O(t){return t.startsWith(x)}function _(t){return t.startsWith(B)}function z(t){const{baseUrl:e,workspace:r="default",tool:n="default",id:i,type:c,path:o,projectId:f,dataset:s}=t;if(!e)throw new Error("baseUrl is required");if(!o)throw new Error("path is required");if(!i)throw new Error("id is required");if("/"!==e&&e.endsWith("/"))throw new Error("baseUrl must not end with a slash");const p="default"===r?void 0:r,d="default"===n?void 0:n,a=function X(t){return _(t)?t.split(h).slice(2).join(h):O(t)?t.slice(x.length):t}(i),y=Array.isArray(o)?m(j(o)):o,u=new URLSearchParams({baseUrl:e,id:a,type:c,path:y});if(p&&u.set("workspace",p),d&&u.set("tool",d),f&&u.set("projectId",f),s&&u.set("dataset",s),function G(t){return!O(t)&&!_(t)}(i))u.set("perspective","published");else if(_(i)){const w=function H(t){if(!_(t))return;const[e,r,...n]=t.split(h);return r}(i);u.set("perspective",w)}const g=["/"===e?"":e];p&&g.push(p);const $=["mode=presentation",`id=${a}`,`type=${c}`,`path=${encodeURIComponent(y)}`];return d&&$.push(`tool=${d}`),g.push("intent","edit",`${$.join(";")}?${u}`),g.join("/")}const b=({sourcePath:t,resultPath:e,value:r})=>{if(function Z(t){return!!/^\d{4}-\d{2}-\d{2}/.test(t)&&!!Date.parse(t)}(r)||function v(t){try{new URL(t,t.startsWith("/")?"https://acme.com":void 0)}catch{return!1}return!0}(r))return!1;const n=t.at(-1);return!("slug"===t.at(-2)&&"current"===n||"string"==typeof n&&(n.startsWith("_")||n.endsWith("Id"))||t.some(i=>"meta"===i||"metadata"===i||"openGraph"===i||"seo"===i)||C(t)||C(e)||"string"==typeof n&&Y.has(n))},Y=new Set(["color","colour","currency","email","format","gid","hex","href","hsl","hsla","icon","id","index","key","language","layout","link","linkAction","locale","lqip","page","path","ref","rgb","rgba","route","secret","slug","status","tag","template","theme","type","textTheme","unit","url","username","variant","website"]);function C(t){return t.some(e=>"string"==typeof e&&null!==e.match(/type/i))}const k=20;function D(t,e,r){const{filter:n,logger:i,enabled:c}=r;if(!c){const s="config.enabled must be true, don't call this function otherwise";throw i?.error?.(`[@sanity/client]: ${s}`,{result:t,resultSourceMap:e,config:r}),new TypeError(s)}if(!e)return i?.error?.("[@sanity/client]: Missing Content Source Map from response body",{result:t,resultSourceMap:e,config:r}),t;if(!r.studioUrl){const s="config.studioUrl must be defined";throw i?.error?.(`[@sanity/client]: ${s}`,{result:t,resultSourceMap:e,config:r}),new TypeError(s)}const o={encoded:[],skipped:[]},f=U(t,e,({sourcePath:s,sourceDocument:p,resultPath:d,value:a})=>{if(!1===("function"==typeof n?n({sourcePath:s,resultPath:d,filterDefault:b,sourceDocument:p,value:a}):b({sourcePath:s,resultPath:d,filterDefault:b,sourceDocument:p,value:a})))return i&&o.skipped.push({path:L(s),value:`${a.slice(0,k)}${a.length>k?"...":""}`,length:a.length}),a;i&&o.encoded.push({path:L(s),value:`${a.slice(0,k)}${a.length>k?"...":""}`,length:a.length});const{baseUrl:y,workspace:u,tool:g}=function Q(t){let e="string"==typeof t?t:t.baseUrl;return"/"!==e&&(e=e.replace(/\/$/,"")),"string"==typeof t?{baseUrl:e}:{...t,baseUrl:e}}("function"==typeof r.studioUrl?r.studioUrl(p):r.studioUrl);if(!y)return a;const{_id:$,_type:w,_projectId:et,_dataset:rt}=p;return(0,M.C)(a,{origin:"sanity.io",href:z({baseUrl:y,workspace:u,tool:g,id:$,type:w,path:s,...!r.omitCrossDatasetReferenceData&&{dataset:rt,projectId:et}})},!1)});if(i){const s=o.skipped.length,p=o.encoded.length;if((s||p)&&((i?.groupCollapsed||i.log)?.("[@sanity/client]: Encoding source map into result"),i.log?.(`[@sanity/client]: Paths encoded: ${o.encoded.length}, skipped: ${o.skipped.length}`)),o.encoded.length>0&&(i?.log?.("[@sanity/client]: Table of encoded paths"),(i?.table||i.log)?.(o.encoded)),o.skipped.length>0){const d=new Set;for(const{path:a}of o.skipped)d.add(a.replace(S,"0").replace(/\[\d+\]/g,"[]"));i?.log?.("[@sanity/client]: List of skipped paths",[...d.values()])}(s||p)&&i?.groupEnd?.()}return f}function L(t){return m(j(t))}var tt=Object.freeze({__proto__:null,stegaEncodeSourceMap:D})}}]);